<% title "All Products" %>
<p><%= link_to "Add product", new_product_path if can? :create, Product %></p>

<div align="center">
  <%= will_paginate %>
</div>

<table>
  <thead>
    <tr>
      <th>Categories</th>
      <th>Name</th>
      <th>Price</th>
      <th>Seller</th>
      <th colspan="3"></th>
    </tr>
  </thead>
  <tbody>
    <% @products.each do |product| %>
      <tr>
        <td><%= product.categories.map(&:name).join(', ') %></td>
        <td><%= product.name %></td>
        <td><%= number_to_currency(product.price) %></td>
        <td><%= product.user.full_name %></td>
        <td><%= link_to "Show", product %></td>
        <td><%= link_to "Edit", edit_product_path(product) if can? :update, product%></td>
        <td><%= link_to "Delete", product, method: :delete, data: { confirm: "Are you sure?" } if can? :destroy, product%></td>
      </tr>
    <% end %>
  </tbody>
</table>

<div align="center">
  <%= will_paginate %>
</div>
